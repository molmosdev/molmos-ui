<div #trigger
     (click)="toggleOptions()"
     (focusin)="isFocused.set(true)"
     (focusout)="isFocused.set(false)" [ngClass]="{'has-label': label(), 'has-value': selectedId()}"
     class="selected-option"
     tabindex="0">
  @if (label()) {
    <div class="label" [ngClass]="{'has-value': selectedId()}">
      {{ label() }}
    </div>
  }
  {{ selectedValue() }}
  <div class="arrows">
    @if (showOptions()) {
      <ng-content select="[mo-arrow-up]"/>
    } @else {
      <ng-content select="[mo-arrow-down]"/>
    }
  </div>
</div>
@defer (when showOptions()) {
  @if (showOptions()) {
    <mo-select-options @optionsTrigger
                       [trigger]="triggerElementRef()!"
                       [(selectedId)]="selectedId"
                       [(selectedValue)]="selectedValue"
                       [(show)]="showOptions"
                       [options]="options()"
                       [positioning]="positioning()"
                       [(usingKeyboard)]="optionsUsingKeyboard">
      <ng-content></ng-content>
    </mo-select-options>
  }
}